<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="cc.mrbird.febs.cos.dao.PostInfoMapper">

    <sql id="baseResult">
        pi.id,
        pi.user_code AS userCode,
        pi.post_type AS postType,
        pi.post_type AS postType,
        pi.content,
        pi.picture,
        pi.del_flag AS delFlag,
        pi.create_date AS createDate
    </sql>

    <sql id="baseParam">
        <if test="postInfo.title != null and postInfo.title != ''">
            AND pi.title LIKE CONCAT('%',#{postInfo.title},'%')
        </if>
        <if test="postInfo.postType != null and">
            AND pi.post_type LIKE CONCAT('%',#{postInfo.postType},'%')
        </if>
    </sql>

    <!-- 分页获取发帖记录信息 -->
    <select id="selectPostPage" resultType="java.util.LinkedHashMap">
        SELECT <include refid="baseResult"/> FROM post_info pi
        WHERE 1 = 1
        <include refid="baseParam"/>
        ORDER pi.create_date DESC
    </select>
</mapper>
